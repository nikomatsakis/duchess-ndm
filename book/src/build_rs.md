# build.rs integration

The recommended way to manage Java-to-Rust callbacks is to let duchess create Java classes that encapsulate the JNI handover.
This permits greater convenience and efficiency.
Duchess supports this pattern via a `build.rs` library.

## How to set it up

* Add a dev-dependency on `duchess-build-rs` with `cargo add --dev duchess-build-rs`.
* Create a `build.rs` in your project as shown below (or add to your existing `build.rs` project).

Sample build.rs:

```rust
fn main() -> anyway::Result<()> {
    duchess_build_rs::DuchessBuildRs::new().execute()
}
```

This will execute `DuchessBuildRs` with the default configuration, which will search your project directory for `.rs` files that appear to be using duchess proc macros.

* For usage of `#[duchess::impl_java_interface]`:
    * We will generate the required Java bridge types and emit a file in `OUT_DIR`. The code generated by the procedural macro imports this code.

